-- Código para criação do banco de dados do Projeto FomeZero.
-- Favor selecionar e criar um de cada vez para que não haja erros.

drop database fomezero

create database fomezero;
use fomezero;

CREATE TABLE TIPOUSUARIO(
    IDTIPOUSUARIO INT PRIMARY KEY,
    DESCRICAO VARCHAR(255) NOT NULL,
    STATUS INT NOT NULL
);

Insert into TIPOUSUARIO (IDTIPOUSUARIO, DESCRICAO, STATUS) VALUES (1, 'DOADOR', 1), (2, 'BENEFICIARIO', 1);

CREATE TABLE USUARIO (
    IDUSUARIO INT AUTO_INCREMENT PRIMARY KEY,
    IDTIPOUSUARIO INT NOT NULL,
    NOME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255) NOT NULL,
    DATANASCIMENTO DATE NOT NULL,
    CPF LONG NOT NULL,
    STATUS INT NOT NULL,
    FOREIGN KEY (IDTIPOUSUARIO) REFERENCES TIPOUSUARIO(IDTIPOUSUARIO)
);

CREATE TABLE PRODUTOS(
    IDPRODUTOS INT AUTO_INCREMENT PRIMARY KEY,
    DESCRICAO VARCHAR(255) NOT NULL,
    STATUS INT NOT NULL    
);

INSERT INTO PRODUTOS (DESCRICAO, STATUS) VALUES ('5Kg Arroz', 1);
INSERT INTO PRODUTOS (DESCRICAO, STATUS) VALUES ('1Kg Feijão', 1);
INSERT INTO PRODUTOS (DESCRICAO, STATUS) VALUES ('1L Óleo', 1);
INSERT INTO PRODUTOS (DESCRICAO, STATUS) VALUES ('1u Sabonete', 1);
INSERT INTO PRODUTOS (DESCRICAO, STATUS) VALUES ('1Kg Sal Refinado', 1);

CREATE TABLE DOACAO(
    IDDOACAO INT AUTO_INCREMENT PRIMARY KEY,
    IDUSUARIO INT NOT NULL, 
    IDPRODUTOS INT NOT NULL,
    QTD INT NOT NULL,
    STATUS INT NOT NULL,
    FOREIGN KEY (IDUSUARIO) REFERENCES USUARIO(IDUSUARIO),
    FOREIGN KEY (IDPRODUTOS) REFERENCES PRODUTOS(IDPRODUTOS)
);
